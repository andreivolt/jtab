# Jtab

A tiny command line tool written in rust to print json data as a formatted table.

```bash
> echo '[{"id": "1", "name": "Rust"}, {"id": "2", "name": "Jtab"}]' | jtab

+----+------+
| id | name |
+----+------+
| 1  | Rust |
+----+------+
| 2  | Jtab |
+----+------+
```

## Install

## Sample commands

Pipe some weather data into jtab:

```bash
➜  ~ curl -s 'https://www.metaweather.com/api/location/search/?query=san' | jtab
+-----------------------+---------------+------------------------+----------+
| latt_long             | location_type | title                  | woeid    |
+-----------------------+---------------+------------------------+----------+
| 37.777119, -122.41964 | City          | San Francisco          | 2487956  |
+-----------------------+---------------+------------------------+----------+
| 32.715691,-117.161720 | City          | San Diego              | 2487889  |
+-----------------------+---------------+------------------------+----------+
| 37.338581,-121.885567 | City          | San Jose               | 2488042  |
+-----------------------+---------------+------------------------+----------+
| 29.424580,-98.494614  | City          | San Antonio            | 2487796  |
+-----------------------+---------------+------------------------+----------+
| 36.974018,-122.030952 | City          | Santa Cruz             | 2488853  |
+-----------------------+---------------+------------------------+----------+
| -33.463039,-70.647942 | City          | Santiago               | 349859   |
+-----------------------+---------------+------------------------+----------+
| 36.406651,25.456530   | City          | Santorini              | 56558361 |
+-----------------------+---------------+------------------------+----------+
| 43.461498,-3.810010   | City          | Santander              | 773964   |
+-----------------------+---------------+------------------------+----------+
| 35.170429,128.999481  | City          | Busan                  | 1132447  |
+-----------------------+---------------+------------------------+----------+
| 28.46163,-16.267059   | City          | Santa Cruz de Tenerife | 773692   |
+-----------------------+---------------+------------------------+----------+
| 35.666431,-105.972572 | City          | Santa Fe               | 2488867  |
+-----------------------+---------------+------------------------+----------+
```

Take only a subset of data and a subset of columns:

```bash
➜  ~ curl -s 'https://www.metaweather.com/api/location/search/?query=san' | jtab --take 4 -f title -f woeid
+---------------+---------+
| title         | woeid   |
+---------------+---------+
| San Francisco | 2487956 |
+---------------+---------+
| San Diego     | 2487889 |
+---------------+---------+
| San Jose      | 2488042 |
+---------------+---------+
| San Antonio   | 2487796 |
+---------------+---------+
```

In the previous commands, `jtab` requires the full payload to be given to it at once as a valid json. To support use cases where data is piped in streaming mode, `jtab` supports a `--streaming` flag. The example below shows how you can ingest the wikipedia change stream in `jtab`:

```
➜  ~ curl -s  https://stream.wikimedia.org/v2/stream/recentchange \
    | grep data \
    | sed 's/^data: //g' \
    | jtab --streaming --take 10 -f id -f title -f user -f type

+------------+----------------------------------------------------------------------------------+-----------------+------------+
| id         | title                                                                            | user            | type       |
+------------+----------------------------------------------------------------------------------+-----------------+------------+
| 414757847  | Catégorie:Jeu de gestion sportive                                                | WikiSyn         | categorize |
+------------+----------------------------------------------------------------------------------+-----------------+------------+
| 11320152   | potenzieret                                                                      | Instance of Bot | edit       |
+------------+----------------------------------------------------------------------------------+-----------------+------------+
| 1272227118 | Category:Infobox person using numbered parameter                                 | 103.119.242.116 | categorize |
+------------+----------------------------------------------------------------------------------+-----------------+------------+
| 106085139  | Dyskusja:Tadeusz Krzymowski                                                      | MastiBot        | new        |
+------------+----------------------------------------------------------------------------------+-----------------+------------+
| 1402697872 | File:Bipolaire.png                                                               | SchlurcherBot   | edit       |
+------------+----------------------------------------------------------------------------------+-----------------+------------+
| 1402697873 | File:Rajin harbour (30182522084).jpg                                             | EatchaBot       | edit       |
+------------+----------------------------------------------------------------------------------+-----------------+------------+
| 12149458   | Категория:Сандомир                                                               | NewsBots        | new        |
+------------+----------------------------------------------------------------------------------+-----------------+------------+
| 98180408   | Ilhéu das Cabras                                                                 | Zdtrlik         | edit       |
+------------+----------------------------------------------------------------------------------+-----------------+------------+
| null       | Damien Boisseau                                                                  | Skarock         | log        |
+------------+----------------------------------------------------------------------------------+-----------------+------------+
| 106085140  | Kategoria:Niezweryfikowane martwe linki niezarchiwizowane przez Internet Archive | MastiBot        | categorize |
+------------+----------------------------------------------------------------------------------+-----------------+------------+

```
